@page "/create/set-variables"
@using ExerciseEngine;
@inject AppState appState

<Creation_Header/>

<MudGrid Class="mt-2 mb-2" Justify="Justify.FlexStart">
@{
    index = -1;
    foreach(Bindable_NotPolymorphic_Variable v in appState.Variables) {
        index++;
        int captured = index;
        <MudItem xs=6>
            <MudPaper >
                <VariableMetaData v="v" i="captured"/>
                <VariableDetails v="v"/>
            </MudPaper>
        </MudItem>
    }

    <MudItem xs=6>
        <MudItem xs="8">
        <MudButton FullWidth="true" @onclick="AddNewVariable" Variant="Variant.Filled" Color="Color.Tertiary" EndIcon="@Icons.Material.Filled.Send">Add new Variable</MudButton>
        </MudItem>
    </MudItem>
}

</MudGrid>
<MudButton Variant="Variant.Filled" Color="Color.Warning" StartIcon="@Icons.Filled.KeyboardReturn" Href="create/confirm-metadata">Return to metadata</MudButton>
<MudButton Variant="Variant.Filled" Color="Color.Tertiary" Class="ml-auto" EndIcon="@Icons.Material.Filled.Send" Href="create/confirm-variables">Continue</MudButton>

@code {
    int index = -1;

    protected override void OnParametersSet() {
        base.OnParametersSet();
        appState.CreationPhase = 3; 
    }

    void AddNewVariable() {
        Console.WriteLine("new variable has been added");
    }
}
